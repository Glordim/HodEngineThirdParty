cmake_minimum_required(VERSION 3.10)

project(HodEngineThirdParty)

set(CMAKE_INSTALL_INCLUDEDIR "include" CACHE PATH "" FORCE)
set(CMAKE_INSTALL_LIBDIR "lib" CACHE PATH "" FORCE)
set(CMAKE_INSTALL_BINDIR "bin" CACHE PATH "" FORCE)

set(BOX2D_SAMPLES OFF CACHE BOOL "" FORCE)
set(BOX2D_VALIDATE OFF CACHE BOOL "" FORCE)
set(BOX2D_UNIT_TESTS OFF CACHE BOOL "" FORCE)
set(BOX2D_AVX2 OFF CACHE BOOL "" FORCE) # TODO: crash on Android
set(CMAKE_POSITION_INDEPENDENT_CODE ON CACHE BOOL "" FORCE)

if(APPLE)
    set(CMAKE_OSX_DEPLOYMENT_TARGET "14" CACHE STRING "" FORCE)
endif()

if(ANDROID)
    set(CMAKE_TOOLCHAIN_FILE "${CMAKE_TOOLCHAIN_FILE}" CACHE FILEPATH "" FORCE)
    set(ANDROID_ABI "${ANDROID_ABI}" CACHE STRING "" FORCE)
    set(ANDROID_PLATFORM "${ANDROID_PLATFORM}" CACHE STRING "" FORCE)
endif()

add_subdirectory(Source/Box2d)
#PROJECT_IS_TOP_LEVEL in Box2d'CMakeLists block include copy
install( 
	DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/Source/Box2d/include/box2d"
	DESTINATION include
)
